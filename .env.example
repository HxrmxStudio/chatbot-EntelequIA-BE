NODE_ENV=development
PORT=3090

CHATBOT_DB_URL=postgresql://chatbot_user:chatbot_pass@localhost:5432/chatbot
# Optional for CI/runners with broken IPv6 routing: force DNS family (4 or 6).
CHATBOT_DB_IP_FAMILY=

ENTELEQUIA_BASE_URL=https://entelequia.com.ar
ENTELEQUIA_API_BASE_URL=https://entelequia.com.ar/api/v1
ENTELEQUIA_WEB_BASE_URL=https://entelequia.com.ar
ENTELEQUIA_API_TIMEOUT_MS=8000

BOT_ORDER_LOOKUP_HMAC_SECRET=
BOT_ORDER_LOOKUP_TIMEOUT_MS=8000
BOT_ORDER_LOOKUP_RETRY_MAX=1
BOT_ORDER_LOOKUP_RETRY_BACKOFF_MS=500
REDIS_URL=
ORDER_LOOKUP_RATE_LIMIT_ENABLED=true
ORDER_LOOKUP_RATE_LIMIT_WINDOW_MS=900000
ORDER_LOOKUP_RATE_LIMIT_IP_MAX=8
ORDER_LOOKUP_RATE_LIMIT_USER_MAX=6
ORDER_LOOKUP_RATE_LIMIT_ORDER_MAX=4
WF1_CONVERSATION_ACTIVE_TTL_MINUTES=1440
WF1_CONVERSATION_CLOSER_ENABLED=true

OPENAI_API_KEY=
OPENAI_MODEL=gpt-4.1-mini
OPENAI_TIMEOUT_MS=12000
WF1_FINAL_REPLY_STRUCTURED_OUTPUT=false
WF1_FINAL_REPLY_ROLLOUT_PERCENT=0
WF1_EVAL_ENABLED=false
WF1_EVAL_MODEL=gpt-4o-mini
WF1_EVAL_DAILY_CAP=200
WF1_EVAL_TIMEOUT_MS=10000
WF1_EVAL_SAMPLE_RANDOM_PERCENT=5
WF1_EVAL_LOW_SCORE_THRESHOLD=0.6
# Deprecated: UI cards are always enabled by backend.
WF1_UI_CARDS_ENABLED=true
WF1_RECOMMENDATIONS_DISAMBIGUATION_ENABLED=true
WF1_RECOMMENDATIONS_FRANCHISE_THRESHOLD=20
WF1_RECOMMENDATIONS_VOLUME_THRESHOLD=10
WF1_RECURSIVE_LEARNING_ENABLED=true
WF1_RECURSIVE_AUTOPROMOTE_ENABLED=false
WF1_RECURSIVE_AUTO_ROLLBACK_ENABLED=false
WF1_RECURSIVE_MIN_EVAL_SAMPLES=120
WF1_RECURSIVE_MIN_FEEDBACK_SAMPLES=20
WF1_RECURSIVE_MIN_SEMANTIC_LIFT=0.03
WF1_RECURSIVE_MAX_FALLBACK_DELTA=0.005
WF1_RECURSIVE_MAX_HALLUCINATION_DELTA=0.002
WF1_RECURSIVE_ROLLBACK_MAX_FALLBACK_DELTA=0.01
WF1_RECURSIVE_ROLLBACK_MAX_DOWNVOTE_DELTA=0.02
WF1_HITL_DAILY_CAP=50
WF1_HITL_RANDOM_SAMPLE_CAP=5
WF1_HITL_GOLDEN_COUNT=3
WF1_RETENTION_MESSAGES_DAYS=90
WF1_RETENTION_EVAL_DAYS=365
WF1_RETENTION_HITL_DAYS=365

TURNSTILE_SECRET_KEY=
WHATSAPP_SECRET=
ALLOWED_ORIGINS=https://entelequia.com.ar,http://localhost:5173

# debug | log | info | warn | error (info/log = same level)
LOG_LEVEL=log
CHAT_HISTORY_LIMIT=10

# Local stack launcher only:
# CHATBOT_ENTELEQUIA_BASE_URL controls which Entelequia API the chatbot uses at runtime.
# Default in script: https://entelequia.com.ar (read-only upstream).
CHATBOT_ENTELEQUIA_BASE_URL=https://entelequia.com.ar
